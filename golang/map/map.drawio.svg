<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1781px" height="1156px" viewBox="-0.5 -0.5 1781 1156" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-07-21T11:12:13.073Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot; etag=&quot;J6pwRmvP17_vJyV53VMq&quot; version=&quot;20.1.4&quot; type=&quot;github&quot;&gt;&lt;diagram id=&quot;-t0L7R9dtZqjnDYoFO7W&quot; name=&quot;map&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" resource="https://app.diagrams.net/#HXJT2976%2FcodeAnalysisNote%2Fmain%2Fgolang%2Fmap%2Fmap.drawio.svg" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="0" y="35" width="310" height="240" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 155px; margin-left: 2px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><ul style="font-family: Helvetica;"><li><font face="Lucida Console">count指示当前map中总共有多少个元素</font></li><li><font face="Lucida Console">flags记录当前map的状态，指示当前map是否正在写;是否使用同样的size进行扩容;是否有迭代器正在进行迭代操作等</font></li><li><font face="Lucida Console">B记录当前map的bucket数量对2取指数</font></li><li><font face="Lucida Console">noverflow记录当前map中overflow bucket的数量</font></li><li><font face="Lucida Console">hash0是map的hash因子</font></li><li><font face="Lucida Console">buckets指向map的bucket数组</font></li><li><font face="Lucida Console">oldbuckets指向map扩容前的buckets数组，仅在map正在进行扩容时有效</font></li><li><font face="Lucida Console">nevacuate指示当前map扩容时，旧的buckets已完成迁移的bucket的偏移量</font></li></ul></div></div></div></foreignObject><text x="2" y="159" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="14px">count指示当前map中总共有多少个元素flags记录当前map的状态，指示当前map是否正在写;是否使用同样的size进行扩容;是否有迭代器正在进行迭代操作等B记录当前map的bucket数量对2取指数noverflo...</text></switch></g><rect x="980" y="35" width="360" height="420" rx="54" ry="54" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 245px; margin-left: 1342px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">bucket</div></div></div></foreignObject><text x="1342" y="252" fill="#333333" font-family="Lucida Console" font-size="22px">bucket</text></switch></g><rect x="335" y="70" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 85px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">flags uint8</div></div></div></foreignObject><text x="460" y="90" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">flags uint8</text></switch></g><rect x="335" y="100" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 115px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">B uint8</div></div></div></foreignObject><text x="460" y="120" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">B uint8</text></switch></g><rect x="335" y="130" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 145px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">noverflow uint16</div></div></div></foreignObject><text x="460" y="150" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">noverflow uint16</text></switch></g><rect x="335" y="160" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 175px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">hash0 uint32</div></div></div></foreignObject><text x="460" y="180" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">hash0 uint32</text></switch></g><path d="M 585 205 L 782.5 205 L 782.5 140 L 973.63 140" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 978.88 140 L 971.88 143.5 L 973.63 140 L 971.88 136.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="335" y="190" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 205px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">buckets unsafe.Pointer</div></div></div></foreignObject><text x="460" y="210" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">buckets unsafe.Pointer</text></switch></g><rect x="335" y="220" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 235px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">oldbuckets unsafe.Pointer</div></div></div></foreignObject><text x="460" y="240" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">oldbuckets unsafe.Pointer</text></switch></g><rect x="335" y="250" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 265px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">nevacuate uintptr</div></div></div></foreignObject><text x="460" y="270" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">nevacuate uintptr</text></switch></g><path d="M 585 295 L 605 295 L 605 337.5 L 490 337.5 L 490 358.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 490 363.88 L 486.5 356.88 L 490 358.63 L 493.5 356.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="335" y="280" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 295px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">extra *mapextra</div></div></div></foreignObject><text x="460" y="300" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">extra *mapextra</text></switch></g><rect x="375" y="410" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 425px; margin-left: 376px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *[]*bmap</div></div></div></foreignObject><text x="500" y="430" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *[]*bmap</text></switch></g><rect x="375" y="440" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 455px; margin-left: 376px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">oldoverflow *[]*bmap</div></div></div></foreignObject><text x="500" y="460" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">oldoverflow *[]*bmap</text></switch></g><path d="M 625 485 L 802.5 485 L 802.5 762.5 L 973.63 762.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 978.88 762.5 L 971.88 766 L 973.63 762.5 L 971.88 759 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="375" y="470" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 485px; margin-left: 376px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">nextOverflow *bmap</div></div></div></foreignObject><text x="500" y="490" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">nextOverflow *bmap</text></switch></g><rect x="1010" y="80" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 95px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">tophash [bucketCnt]uint8</div></div></div></foreignObject><text x="1135" y="100" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">tophash [bucketCnt]uint8</text></switch></g><rect x="335" y="40" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 55px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">count int</div></div></div></foreignObject><text x="460" y="60" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">count int</text></switch></g><rect x="420" y="0" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 20px; margin-left: 460px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">hmap<br style="font-size: 22px;" /></div></div></div></foreignObject><text x="460" y="27" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">hmap&#xa;</text></switch></g><rect x="425" y="365" width="130" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 385px; margin-left: 490px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">mapextra</div></div></div></foreignObject><text x="490" y="392" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">mapextra</text></switch></g><rect x="1260" y="75" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 95px; margin-left: 1300px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">bmap</div></div></div></foreignObject><text x="1300" y="102" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">bmap</text></switch></g><rect x="1010" y="110" width="250" height="30" rx="4.5" ry="4.5" fill="#ffe599" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 125px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">key1</div></div></div></foreignObject><text x="1135" y="130" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">key1</text></switch></g><rect x="1010" y="140" width="250" height="30" rx="4.5" ry="4.5" fill="#ffe599" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 155px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">key2</div></div></div></foreignObject><text x="1135" y="160" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">key2</text></switch></g><rect x="1110" y="175" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,195)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 195)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 195px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="202" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="1010" y="225" width="250" height="30" rx="4.5" ry="4.5" fill="#ffe599" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 240px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">key8</div></div></div></foreignObject><text x="1135" y="245" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">key8</text></switch></g><rect x="1010" y="255" width="250" height="30" rx="4.5" ry="4.5" fill="#ffb570" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 270px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">value1</div></div></div></foreignObject><text x="1135" y="275" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">value1</text></switch></g><rect x="1010" y="285" width="250" height="30" rx="4.5" ry="4.5" fill="#ffb570" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 300px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">value2</div></div></div></foreignObject><text x="1135" y="305" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">value2</text></switch></g><rect x="1010" y="370" width="250" height="30" rx="4.5" ry="4.5" fill="#ffb570" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 385px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">value8</div></div></div></foreignObject><text x="1135" y="390" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">value8</text></switch></g><rect x="1010" y="400" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 415px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *bmap</div></div></div></foreignObject><text x="1135" y="420" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *bmap</text></switch></g><rect x="1110" y="325" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,345)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 345)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 345px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="352" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="980" y="455" width="360" height="190" rx="28.5" ry="28.5" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 550px; margin-left: 1342px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">bucket</div></div></div></foreignObject><text x="1342" y="557" fill="#333333" font-family="Lucida Console" font-size="22px">bucket</text></switch></g><rect x="1010" y="500" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 515px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">tophash [bucketCnt]uint8</div></div></div></foreignObject><text x="1135" y="520" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">tophash [bucketCnt]uint8</text></switch></g><rect x="1260" y="495" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 515px; margin-left: 1300px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">bmap</div></div></div></foreignObject><text x="1300" y="522" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">bmap</text></switch></g><rect x="1010" y="600" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 615px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *bmap</div></div></div></foreignObject><text x="1135" y="620" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *bmap</text></switch></g><rect x="1110" y="540" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,560)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 560)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 560px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="567" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="1110" y="655" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,675)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 675)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 675px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="682" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="980" y="715" width="360" height="190" rx="28.5" ry="28.5" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 810px; margin-left: 1342px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">bucket</div></div></div></foreignObject><text x="1342" y="817" fill="#333333" font-family="Lucida Console" font-size="22px">bucket</text></switch></g><rect x="1010" y="760" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 775px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">tophash [bucketCnt]uint8</div></div></div></foreignObject><text x="1135" y="780" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">tophash [bucketCnt]uint8</text></switch></g><rect x="1260" y="755" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 775px; margin-left: 1300px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">bmap</div></div></div></foreignObject><text x="1300" y="782" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">bmap</text></switch></g><rect x="1010" y="860" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 875px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *bmap</div></div></div></foreignObject><text x="1135" y="880" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *bmap</text></switch></g><rect x="1110" y="800" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,820)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 820)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 820px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="827" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="980" y="965" width="360" height="190" rx="28.5" ry="28.5" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 1060px; margin-left: 1342px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">bucket</div></div></div></foreignObject><text x="1342" y="1067" fill="#333333" font-family="Lucida Console" font-size="22px">bucket</text></switch></g><rect x="1010" y="1010" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1025px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">tophash [bucketCnt]uint8</div></div></div></foreignObject><text x="1135" y="1030" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">tophash [bucketCnt]uint8</text></switch></g><rect x="1260" y="1005" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1025px; margin-left: 1300px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">bmap</div></div></div></foreignObject><text x="1300" y="1032" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">bmap</text></switch></g><rect x="1010" y="1110" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1125px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *bmap</div></div></div></foreignObject><text x="1135" y="1130" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *bmap</text></switch></g><rect x="1110" y="1050" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,1070)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 1070)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1070px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="1077" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="1110" y="915" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,935)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 935)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 935px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="942" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><path d="M 1260 1125 L 1260 1135 L 1490 1135 L 1490 140 L 1346.37 140" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1341.12 140 L 1348.12 136.5 L 1346.37 140 L 1348.12 143.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="15" y="350" width="320" height="230" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 318px; height: 1px; padding-top: 465px; margin-left: 17px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><ul style="font-family: Helvetica;"><li><font face="Lucida Console">overflow和oldoverflow用于在map不含指针类型数据的时候，分别记录了map的overflow bucket数组和扩容时数据迁移前的overflow bucket数组，用于辅助GC进行内存释放</font></li><li>nextOverflow指向了在map初始化或者扩容新分配内存时，根据bucket的数量，可能会提前分配一定数量的overflow bucket，以备当map元素增加，需要分配overflow bucket时可以快速拿这里面提前分配好的overflow bucket进行使用，减少map写入操作时可能的overflow bucket分配开销</li></ul></div></div></div></foreignObject><text x="17" y="469" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="14px">overflow和oldoverflow用于在map不含指针类型数据的时候，分别记录了map的overflow bucket数组和扩容时数据迁移前的overfl...</text></switch></g><rect x="1470" y="10" width="310" height="315" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 168px; margin-left: 1472px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>bucket是map存储真实数据的内存区域</div><div><ul><li>每个bucket头部都有一个8个元素的tophash数组，该数组元素用于记录该元素对应index位置的cell的key经过hash后的头8位，特殊情况下还可以用来指示该cell的状态，如是否为空;扩容时迁移到上半区还是下半区等</li><li>tophash数据后面的内存区域，按照key1~key8，value1~value8的顺序，存放了8组kv对，用于存储map的真实数据</li><li>在kv对最后，存储了一个指针，用于指向该bucket可能存在的对应的overflow bucket，overflow bucket用于当bucket的8组kv对都使用完毕后，新的数据的存储。可以看到一个bucket的overflowbucket全部使用这种方式以相当于链表的形式链接起来</li></ul></div></div></div></div></foreignObject><text x="1472" y="172" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="14px">bucket是map存储真实数据的内存区域...</text></switch></g><rect x="360" y="580" width="310" height="315" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 738px; margin-left: 362px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>map读写的大致过程</div><div><ul><li>当对map进行特定的key查找时，首先通过hash函数计算出该key对应的bucket。然后遍历该bucket和该bucket对应的所有overflow bucket，找到存储的元素中，tophash对应的元素与key计算出来的hash值top 8位相等且找到的元素key与要查找的target key相等的元素，然后返回该元素对应的value</li><li>当对map进行写入时，也与上述读过程类似。如果在上述查找过程中找到key对应的value，则更新之；若没有找到，则证明该key还没有写入过，因此需要在对应的bucket或者overflow bucket(若需要甚至可能需要分配新的overflow bucket)中找到合适位置将新的kv对写入</li></ul></div></div></div></div></foreignObject><text x="362" y="742" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="14px">map读写的大致过程...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>
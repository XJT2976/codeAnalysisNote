<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than diagrams.net -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1781px" height="1156px" viewBox="-0.5 -0.5 1781 1156" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2022-07-21T10:48:42.624Z&quot; agent=&quot;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/103.0.0.0 Safari/537.36&quot; etag=&quot;Q4FHLz48J7DPDuQdncVY&quot; version=&quot;20.1.4&quot; type=&quot;github&quot;&gt;&lt;diagram id=&quot;-t0L7R9dtZqjnDYoFO7W&quot; name=&quot;map&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" resource="https://app.diagrams.net/#HXJT2976%2FcodeAnalysisNote%2Fmain%2Fgolang%2Fmap%2Fmap.drawio.svg"><defs/><g><rect x="0" y="35" width="310" height="240" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 155px; margin-left: 2px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><ul style="font-family: Helvetica;"><li><font face="Lucida Console">count指示当前map中总共有多少个元素</font></li><li><font face="Lucida Console">flags记录当前map的状态，指示当前map是否正在写;是否使用同样的size进行扩容;是否有迭代器正在进行迭代操作等</font></li><li><font face="Lucida Console">B记录当前map的bucket数量对2取指数</font></li><li><font face="Lucida Console">noverflow记录当前map中overflow bucket的数量</font></li><li><font face="Lucida Console">hash0是map的hash因子</font></li><li><font face="Lucida Console">buckets指向map的bucket数组</font></li><li><font face="Lucida Console">oldbuckets指向map扩容前的buckets数组，仅在map正在进行扩容时有效</font></li><li><font face="Lucida Console">nevacuate指示当前map扩容时，旧的buckets已完成迁移的bucket的偏移量</font></li></ul></div></div></div></foreignObject><text x="2" y="159" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="14px">count指示当前map中总共有多少个元素flags记录当前map的状态，指示当前map是否正在写;是否使用同样的size进行扩容;是否有迭代器正在进行迭代操作等B记录当前map的bucket数量对2取指数noverflo...</text></switch></g><rect x="980" y="35" width="360" height="420" rx="54" ry="54" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 245px; margin-left: 1342px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">bucket</div></div></div></foreignObject><text x="1342" y="252" fill="#333333" font-family="Lucida Console" font-size="22px">bucket</text></switch></g><rect x="335" y="70" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 85px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">flags uint8</div></div></div></foreignObject><text x="460" y="90" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">flags uint8</text></switch></g><rect x="335" y="100" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 115px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">B uint8</div></div></div></foreignObject><text x="460" y="120" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">B uint8</text></switch></g><rect x="335" y="130" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 145px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">noverflow uint16</div></div></div></foreignObject><text x="460" y="150" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">noverflow uint16</text></switch></g><rect x="335" y="160" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 175px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">hash0 uint32</div></div></div></foreignObject><text x="460" y="180" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">hash0 uint32</text></switch></g><path d="M 585 205 L 782.5 205 L 782.5 140 L 973.63 140" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 978.88 140 L 971.88 143.5 L 973.63 140 L 971.88 136.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="335" y="190" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 205px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">buckets unsafe.Pointer</div></div></div></foreignObject><text x="460" y="210" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">buckets unsafe.Pointer</text></switch></g><rect x="335" y="220" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 235px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">oldbuckets unsafe.Pointer</div></div></div></foreignObject><text x="460" y="240" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">oldbuckets unsafe.Pointer</text></switch></g><rect x="335" y="250" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 265px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">nevacuate uintptr</div></div></div></foreignObject><text x="460" y="270" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">nevacuate uintptr</text></switch></g><path d="M 585 295 L 605 295 L 605 337.5 L 490 337.5 L 490 358.63" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 490 363.88 L 486.5 356.88 L 490 358.63 L 493.5 356.88 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="335" y="280" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 295px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">extra *mapextra</div></div></div></foreignObject><text x="460" y="300" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">extra *mapextra</text></switch></g><rect x="375" y="410" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 425px; margin-left: 376px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *[]*bmap</div></div></div></foreignObject><text x="500" y="430" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *[]*bmap</text></switch></g><rect x="375" y="440" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 455px; margin-left: 376px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">oldoverflow *[]*bmap</div></div></div></foreignObject><text x="500" y="460" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">oldoverflow *[]*bmap</text></switch></g><path d="M 625 485 L 802.5 485 L 802.5 762.5 L 973.63 762.5" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 978.88 762.5 L 971.88 766 L 973.63 762.5 L 971.88 759 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="375" y="470" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 485px; margin-left: 376px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">nextOverflow *bmap</div></div></div></foreignObject><text x="500" y="490" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">nextOverflow *bmap</text></switch></g><rect x="1010" y="80" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 95px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">tophash [bucketCnt]uint8</div></div></div></foreignObject><text x="1135" y="100" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">tophash [bucketCnt]uint8</text></switch></g><rect x="335" y="40" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 55px; margin-left: 336px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">count int</div></div></div></foreignObject><text x="460" y="60" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">count int</text></switch></g><rect x="420" y="0" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 20px; margin-left: 460px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">hmap<br style="font-size: 22px;" /></div></div></div></foreignObject><text x="460" y="27" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">hmap&#xa;</text></switch></g><rect x="425" y="365" width="130" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 385px; margin-left: 490px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">mapextra</div></div></div></foreignObject><text x="490" y="392" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">mapextra</text></switch></g><rect x="1260" y="75" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 95px; margin-left: 1300px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">bmap</div></div></div></foreignObject><text x="1300" y="102" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">bmap</text></switch></g><rect x="1010" y="110" width="250" height="30" rx="4.5" ry="4.5" fill="#ffe599" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 125px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">key1</div></div></div></foreignObject><text x="1135" y="130" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">key1</text></switch></g><rect x="1010" y="140" width="250" height="30" rx="4.5" ry="4.5" fill="#ffe599" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 155px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">key2</div></div></div></foreignObject><text x="1135" y="160" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">key2</text></switch></g><rect x="1110" y="175" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,195)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 195)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 195px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="202" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="1010" y="225" width="250" height="30" rx="4.5" ry="4.5" fill="#ffe599" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 240px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">key8</div></div></div></foreignObject><text x="1135" y="245" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">key8</text></switch></g><rect x="1010" y="255" width="250" height="30" rx="4.5" ry="4.5" fill="#ffb570" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 270px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">value1</div></div></div></foreignObject><text x="1135" y="275" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">value1</text></switch></g><rect x="1010" y="285" width="250" height="30" rx="4.5" ry="4.5" fill="#ffb570" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 300px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">value2</div></div></div></foreignObject><text x="1135" y="305" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">value2</text></switch></g><rect x="1010" y="370" width="250" height="30" rx="4.5" ry="4.5" fill="#ffb570" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 385px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">value8</div></div></div></foreignObject><text x="1135" y="390" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">value8</text></switch></g><rect x="1010" y="400" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 415px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *bmap</div></div></div></foreignObject><text x="1135" y="420" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *bmap</text></switch></g><rect x="1110" y="325" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,345)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 345)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 345px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="352" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="980" y="455" width="360" height="190" rx="28.5" ry="28.5" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 550px; margin-left: 1342px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">bucket</div></div></div></foreignObject><text x="1342" y="557" fill="#333333" font-family="Lucida Console" font-size="22px">bucket</text></switch></g><rect x="1010" y="500" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 515px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">tophash [bucketCnt]uint8</div></div></div></foreignObject><text x="1135" y="520" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">tophash [bucketCnt]uint8</text></switch></g><rect x="1260" y="495" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 515px; margin-left: 1300px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">bmap</div></div></div></foreignObject><text x="1300" y="522" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">bmap</text></switch></g><rect x="1010" y="600" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 615px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *bmap</div></div></div></foreignObject><text x="1135" y="620" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *bmap</text></switch></g><rect x="1110" y="540" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,560)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 560)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 560px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="567" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="1110" y="655" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,675)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 675)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 675px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="682" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="980" y="715" width="360" height="190" rx="28.5" ry="28.5" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 810px; margin-left: 1342px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">bucket</div></div></div></foreignObject><text x="1342" y="817" fill="#333333" font-family="Lucida Console" font-size="22px">bucket</text></switch></g><rect x="1010" y="760" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 775px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">tophash [bucketCnt]uint8</div></div></div></foreignObject><text x="1135" y="780" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">tophash [bucketCnt]uint8</text></switch></g><rect x="1260" y="755" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 775px; margin-left: 1300px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">bmap</div></div></div></foreignObject><text x="1300" y="782" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">bmap</text></switch></g><rect x="1010" y="860" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 875px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *bmap</div></div></div></foreignObject><text x="1135" y="880" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *bmap</text></switch></g><rect x="1110" y="800" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,820)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 820)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 820px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="827" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="980" y="965" width="360" height="190" rx="28.5" ry="28.5" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 362px; height: 1px; padding-top: 1060px; margin-left: 1342px;"><div data-drawio-colors="color: #333333; " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(51, 51, 51); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">bucket</div></div></div></foreignObject><text x="1342" y="1067" fill="#333333" font-family="Lucida Console" font-size="22px">bucket</text></switch></g><rect x="1010" y="1010" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1025px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">tophash [bucketCnt]uint8</div></div></div></foreignObject><text x="1135" y="1030" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">tophash [bucketCnt]uint8</text></switch></g><rect x="1260" y="1005" width="80" height="40" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1025px; margin-left: 1300px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">bmap</div></div></div></foreignObject><text x="1300" y="1032" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">bmap</text></switch></g><rect x="1010" y="1110" width="250" height="30" rx="4.5" ry="4.5" fill="#fad9d5" stroke="#ae4132" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 248px; height: 1px; padding-top: 1125px; margin-left: 1011px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 16px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;">overflow *bmap</div></div></div></foreignObject><text x="1135" y="1130" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="16px" text-anchor="middle">overflow *bmap</text></switch></g><rect x="1110" y="1050" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,1070)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 1070)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1070px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="1077" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><rect x="1110" y="915" width="60" height="40" fill="none" stroke="none" transform="rotate(90,1140,935)" pointer-events="all"/><g transform="translate(-0.5 -0.5)rotate(90 1140 935)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 935px; margin-left: 1140px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: center;"><div style="display: inline-block; font-size: 22px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: nowrap;">...</div></div></div></foreignObject><text x="1140" y="942" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="22px" text-anchor="middle">...</text></switch></g><path d="M 1260 1125 L 1260 1135 L 1490 1135 L 1490 140 L 1346.37 140" fill="none" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1341.12 140 L 1348.12 136.5 L 1346.37 140 L 1348.12 143.5 Z" fill="rgb(0, 0, 0)" stroke="rgb(0, 0, 0)" stroke-miterlimit="10" pointer-events="all"/><rect x="15" y="350" width="320" height="230" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 318px; height: 1px; padding-top: 465px; margin-left: 17px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><ul style="font-family: Helvetica;"><li><font face="Lucida Console">overflow和oldoverflow用于在map不含指针类型数据的时候，分别记录了map的overflow bucket数组和扩容时数据迁移前的overflow bucket数组，用于辅助GC进行内存释放</font></li><li>nextOverflow指向了在map初始化或者扩容新分配内存时，根据bucket的数量，可能会提前分配一定数量的overflow bucket，以备当map元素增加，需要分配overflow bucket时可以快速拿这里面提前分配好的overflow bucket进行使用，减少map写入操作时可能的overflow bucket分配开销</li></ul></div></div></div></foreignObject><text x="17" y="469" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="14px">overflow和oldoverflow用于在map不含指针类型数据的时候，分别记录了map的overflow bucket数组和扩容时数据迁移前的overfl...</text></switch></g><rect x="1470" y="10" width="310" height="315" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 168px; margin-left: 1472px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>bucket是map存储真实数据的内存区域</div><div><ul><li>每个bucket头部都有一个8个元素的tophash数组，该数组元素用于记录该元素对应index位置的cell的key经过hash后的头8位，特殊情况下还可以用来指示该cell的状态，如是否为空;扩容时迁移到上半区还是下半区等</li><li>tophash数据后面的内存区域，按照key1~key8，value1~value8的顺序，存放了8组kv对，用于存储map的真实数据</li><li>在kv对最后，存储了一个指针，用于指向该bucket可能存在的对应的overflow bucket，overflow bucket用于当bucket的8组kv对都使用完毕后，新的数据的存储。可以看到一个bucket的overflowbucket全部使用这种方式以相当于链表的形式链接起来</li></ul></div></div></div></div></foreignObject><text x="1472" y="172" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="14px">bucket是map存储真实数据的内存区域...</text></switch></g><rect x="360" y="580" width="310" height="315" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility" style="overflow: visible; text-align: left;"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe flex-start; width: 308px; height: 1px; padding-top: 738px; margin-left: 362px;"><div data-drawio-colors="color: rgb(0, 0, 0); " style="box-sizing: border-box; font-size: 0px; text-align: left;"><div style="display: inline-block; font-size: 14px; font-family: &quot;Lucida Console&quot;; color: rgb(0, 0, 0); line-height: 1.2; pointer-events: all; white-space: normal; overflow-wrap: normal;"><div>map读写的大致过程</div><div><ul><li>当对map进行特定的key查找时，首先通过hash函数计算出该key对应的bucket。然后遍历该bucket和该bucket对应的所有overflow bucket，找到存储的元素中，tophash对应的元素与key计算出来的hash值top 8位相等且找到的元素key与要查找的target key相等的元素，然后返回该元素对应的value</li><li>当对map进行写入时，也与上述读过程类似。如果在上述查找过程中找到key对应的value，则更新之；若没有找到，则证明该key还没有写入过，因此需要在对应的bucket或者overflow bucket(若需要甚至可能需要分配新的overflow bucket)中找到合适位置将新的kv对写入</li></ul></div></div></div></div></foreignObject><text x="362" y="742" fill="rgb(0, 0, 0)" font-family="Lucida Console" font-size="14px">map读写的大致过程...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Text is not SVG - cannot display</text></a></switch></svg>